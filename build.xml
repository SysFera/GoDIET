<?xml version="1.0" encoding="UTF-8"?>

<project basedir="." default="all" name="GoDIET">

    <target name="init">
        <tstamp/>
        <property name="project" value="GoDIET"/>
        <property name="src" value="goDiet"/>
        <property name="build" value="build"/>
        <property name="dist" value="."/>
        <property name="apidoc" value="doc"/>
        <property name="version" value="dev"/>        
    </target>

    <target depends="init" name="compile">
        <mkdir dir="${build}"/>
        <javac debug="true" deprecation="true" destdir="${build}" srcdir="${src}">
          </javac>
    </target>

    <target depends="init,compile" description="Build the jar." name="jar">
         <jar basedir="${build}" compress="true" jarfile="${project}.jar">
            <manifest>
                <attribute name="Built-By" value="${user.name}"/>                
                <section name="Project Descriptions">
                    <attribute name="Project-Title" value="${project}"/>
                    <attribute name="Project-Version" value="${version}"/>
                    <attribute name="Release-date" value=" ${TODAY}"/>
                </section>
                <attribute name="Main-Class" value="goDiet/GoDIET"/>                
            </manifest>            
        </jar>
    </target>

    <target depends="init,jar" description="Build everything." name="all">
        <echo message="${project} built."/>
    </target>

    <target depends="init,compile" description="Javadoc for my API." name="javadoc">
        <mkdir dir="${apidoc}"/>
        <javadoc destdir="${apidoc}" packagenames="${src}.*">
            <sourcepath>
                <pathelement location="${dist}"/>
            </sourcepath>
        </javadoc>
    </target>

    <target depends="init" description="Clean all build products." name="clean">
        <delete>
            <fileset dir="${build}">
                <include name="**/*.class"/>
            </fileset>
        </delete>
        <delete dir="${build}"/>
        <delete dir="${apidoc}"/>
        <delete file="${project}.jar"/>
    </target>
</project>
